# ------------------------引用类型---------------------- #

<p id="title"></p>

## 目录 ##

:arrow_down:<a href="#a1">1.Object类型</a>

:arrow_down:<a href="#a2">2.Array类型</a>

:arrow_down:<a href="#a3">3.垃圾收集</a>

***

引用类型的值（对象）是引用类型的一个实例。在ECMAScript中，引用类型是一种数据结构，用于将数据和功能组织在一起，它也常被称为类。ECMAScript从技术上也是一门面向对象的语言，但它不具备传统的面向对象语言所支持的类和接口等基本结构，引用类型有时候也称为对象定义，因为他们是描述的是一类对象所具有的属性与方法。

<p id="a1"></p>

## 	:hourglass:Object类型 ## 

:arrow_double_up:<a href = "#title">返回目录</a>

我们前面常看到的就是Object类型，而且Object也是我们常用的最多类型。创建Object实例方法有两种，一是使用new操作符后跟Object构造函数如下：

```JavaScript
var person = new Object();
person.name = "Lmc";
person.age = 21;
```

另外一种是使用对象字面量表示法，如下：

```JavaScript
var person = {
    name : "Lmc",
    age : 21
};
```

上面这两种方式完全一样对于字面量，属性还可以使用字符串表示，如下：

```JavaScript
var person = {
    "name" : "Lmc",
    "age" : 21
};

```

另外，如果只使用花括号并不添加内容，则代表声明一个对象：

```JavaScript
var person = {};
person.name = "Lmc";
person.age = 21;
```

访问对象属性时使用的都是点表示法，这也是很多语言中通用的语法，不过Js还可以使用中括号来访问，使用这种方法时，只需要把属性的字符串传入就行，如下：

```JavaScript
var person = {};
person.name = "Lmc";
person.age = 21;
alert(person.name);
alert(person["age"]);
```

对于两种方法，我们建议使用点表示法，但是方括号也是可以的。

<p id="a2"></p>

## 	:hourglass:Array类型 ## 

:arrow_double_up:<a href = "#title">返回目录</a>

Array是数组类型，也是用的比较多的类型之一，与其他语言的数组不一样的是，ECMAScript的数组每一项可以保存不一样的数据类型，就是说，数组的第一项可以为数值，第二项可以为字符串，依次类推，而且数组的长度是动态的，可以根据数据数量多少来自动扩展。

创建数组的基本方式有2种，第一种是使用Array构造函数，如下代码：

```JavaScript
var a = new Array();
```

如果想要规定其保存数量，可以在构造函数中添加一个数值大小来限定长度：

```JavaScript
var a = new Array(20);
```

也可以在构造函数中添加数组元素，如下添加：

```JavaScript
var a = new Array(2,"Lmc",undefined);
```

但不要添加只含有一个元素并且该元素还是数值的元素，否者会被认为是数组的长度。另外创建数组的时候可以省略new操作符，如下：

```JavaScript
var a =  Array(20);
var a =  Array(2,"Lmc",undefined);
```

创建数组第二种方式就是字面量表示法，如下：

```JavaScript
var a = ["5","Hello",4,undefined];         //包含4个元素的方法
var b = [];                                //空数组
```

对于数组的访问与大多数语言一样，采用从0开始的索引值：`a[0],a[1]`数组类型自带长度属性length，它会返回数组的长度：

```JavaScript
var a = new Array(2,"Lmc",undefined);
alert(a.length);         //3
```

数组的length不是只读的，我们可以修改它，来改变数组的大小与添加空的元素：

```JavaScript
var a = new Array(2,"Lmc",undefined);
a.length = 5;
alert(a[3]);            //undefined
alert(a[4]);            //undefined
alert(a.length);        //5
```

如上多出来的元素就是未定义的量，同理如果减少长度，相当于删除：

```JavaScript
var a = new Array(2,"Lmc",undefined);
a.length = 2;
alert(a[2]);            //undefined
alert(a[3]);            //undefined
alert(a.length);        //2
```

### :closed_umbrella: 检测数组 ###

如果有时想确认某个值是否是数组，可以使用Array.isArray()方法，

```JavaScript
var a = new Array(2,"Lmc",undefined);

alert(Array.isArray(a));        //true
alert(Array.isArray(a[1]));     //false
```

可以通过这样的方法来检查是否是数组，从而进行一些操作。

### :closed_umbrella: 转换方法 ###

所有的对象都有toLocaleString(),toString()和valueOf()方法，对于数组，他们可以将数组的内容变成一个由逗号分隔开的字符串

```JavaScript
var a = new Array(2,"Lmc",undefined,"Love","Kay");

alert(a.toLocaleString());
alert(a.toString());
alert(a.valueOf())
```

以上三种结果均为：`2,Lmc,Love,Kay`注意这是一个完整的字符串，并不是拆分的字符串。当然你可以使用Join符号来改变分隔符，上面的默认分隔符是逗号，现在我们来使用Jion方法完成不同样式的拼接字符串

```JavaScript
var a = new Array(2,"Lmc",undefined,"Love","Kay");

alert(a.join(""));    //2LmcLoveKay
alert(a.join(" "));   //2 Lmc Love Kay
alert(a.join("||"));  //2||Lmc||Love||Kay
```
可以看到第一个是空串，说明没有分隔符，所以字符串全拼接，无分隔，第二个是空格，所以每个元素之间含有一个空格，同理第三个为字符串，那就以该字符串作为分隔符。

### :closed_umbrella: 栈方法 ###

ECMAScript数组也提供了一种让数组的行为类似于其他数据结构的办法，具体来说，数组可以表现得像栈一样。这是一种先进后出的结构（对于这种栈这种数据结构请自己查询资料完成了解）ECMAScript为数组提供了push()和pop()方法，以便实现类似栈的行为。

push()方法可以接受任意数量的参数，把他们逐个添加到末尾，并返回修改后数组的长度，pop()方法则是从数组末尾移除最后一项，减少数组的length值，然后返回移除的项。如下：

```JavaScript
var len = a.push("abc",123,"+-/*");
alert(len);          //push返回数组长度，3

len = a.push("Lmc");  
alert(len);          //push返回数组长度，4

a.push("Jx");        //只推入一个项，不返回长度，但是数组长度还是会加1，
alert(len);          //4

var item = a.pop();  //pop返回被移除的最后一个项，并将长度减一
alert(item);         //Jx
alert(a.length);     //4
```

值得注意的是push可以添加任意多参数，但是pop却只能删除并返回最后一项，这样删除比较慢，可以通过将数组的length值改为0，来达到将数组清空。

### :closed_umbrella: 队列方法 ###

与栈数据结构对应的还有一个队列，这也是常用的数据结构之一，它是遵守的先进先出的原则，push是从末尾传入值，pop却是删除并移除最后一项，如果想移除最前面的，则需要使用队列的shift()方法，它能够移除第一项并返回该项，同时将数组长度减一，结合使用shift与push方法，可以像使用队列一样使用数组，如下：

```JavaScript
var a = new Array();
var len = a.push("abc",123,"+-/*");

var item = a.shift();
alert(item);          //"abc"
item = a.shift();
alert(item);          //123
item = a.shift();
alert(item);          //"+-/*"
```

此外ECMAScript还为数组提供另一个unshift()方法，与shift()方法用途相反，它能在数组前端添加任意个项并返回新数组长度，如下：

```JavaScript
var a = new Array();
var len = a.push(3,4,5);

a.unshift(1,2);   数组前添加元素 a : 1,2,3,4,5
a.push(6,7,8);    数组尾添加元素 a : 1,2,3,4,5,6,7,8


for(item in a){
    alert(a[item]);        //数组迭代循环
}
```

### :closed_umbrella: 重排序方法 ###

数值中已经存在两个可以直接用来排序的方法 ： reverse()和sort()。reverse是将数组的顺序反转，如下：

```JavaScript
var a = new Array();
a = [1,4,3,2,5];
a.reverse();

for(item in a){
    alert(a[item]);    
}
```

上面弹出的结果为 5，2,3,4,1

sort()方法按照升序排列数组项----即最小的值在最前面，最大值排在最后面，但是这种方法并不是可行的，因为它是将数组的每一项都是用toString()方法后根据字符串来比较的。所以对于下面这种情况：

```JavaScript
var a = new Array();
a = [1,5,3,2,4,15,35];
a.sort();

for(item in a){
    alert(a[item]);
}
```

结果为 1,15,2,3,35,4,5，这是由于15和35转为了"15"与"35"由于字符串开头为1所以比"2"小，故排在"2"前面，同理35也是一样的道理，这种排序只适用字符串和位数一致的数值排序，对于数值位数不一致的要采用自己编写的排序算法，或者对sort方法提供参数，这个参数为一个比较函数的方法，且该方法含有两个参数，其样式如下：

```JavaScript
function compare(a,b){
    if(a<b){
        return -1;
    }
    else if(a>b){
        return 1;
    }
    else{
        return 0;
    }
}
var a = new Array();

a = [1,5,3,2,4,15,35];

a.sort(compare);

for(item in a){
    alert(a[item]);
}
```
像这样就可以正确的为升序排序，对于比较函数，函数值返回-1，表示将小的在前，为1则是大的在前，还可以将上面sort方法改为降序排序：

```JavaScript
function compare(a,b){
    if(a<b){
        return 1;    //更改排序
    }
    else if(a>b){
        return -1;
    }
    else{
        return 0;
    }
}
var a = new Array();

a = [1,5,3,2,4,15,35];

a.sort(compare);

for(item in a){
    alert(a[item]);
}
```

### :closed_umbrella: 操作方法 ###

ECMAScript为操作已经包含在数组中的提供了很多方法，如下：

* concat()方法

concat()方法可以基于当前数组中所有项创建一个新数组，具体来说也就是在原数组末尾上添加项并将这个数组返回，原数组不会被修改，只是借用原数组的副本上进行操作，也可以当做字符串拼接方法，只是不会修改本身，需要用一个新的数组来接受，如下：

```JavaScript
var array = [1,2,3];
var newArray = array.concat(4,5);

alert(array);          //1,2,3
alert(newArray);       //1,2,3,4,5
```

* slice()方法

它能够基于当前数组中，一个或者多个创建一个新数组，它接受一个或者两个参数，只有一个参数时，该方法返回从该位置到最后一项所所组成的数组，如果含有两个参数，该方法返回起始和结束位置之间的项所组成的数组，如下：

```JavaScript
var array = [1,2,3,4,5,6,7,8,9];

var a1 = array.slice(4);     //5,6,7,8,9
var a2 = array.slice(8);     //9
var a3 = array.slice(2,8);   //3,4,5,6,7,8,9
var a4 = array.slice(4,5);   //5

alert(a1);
alert(a2);
alert(a3);
alert(a4);
```

注意的是位置从0开始。

* splice()方法

这个方法是数组中最强大的方法，他可以修改，插入与替换操作。它是根据参数的个数来完成不同的操作，如下：

  * 删除 ： 可以删除任意数量的项，只需要指定2个参数，第一个参数是指定删除的位置，第二个是指定从该位置删除的个数，如下：
  
```JavaScript
var array = [1,2,3,4,5,6,7,8,9];
var a1 = array.splice(0,3);    //删除从下标为0，的3个元素项

alert(a1);                     //1,2,3
alert(array);                  //4,5,6,7,8,9

var a2 = array.splice(4,2);    //删除从下标为4,的2个项
alert(a2);                     //8,9
alert(array);                  //4,5,6,7
```

  * 插入/替换 ： 可以向指定的位置插入任意数量的项，只需要提供3个或者3个以上参数 ： 起始位置，要删除的项数和插入的多个项，如下：
  
```JavaScript
var array = [1,2,3,4,5,6,7,8,9];

array.splice(0,3,1,1,1);   //删除项1,2,3，改用1,1,1从删除的位置插入
alert(array);              //1,1,1,4,5,6,7,8,9

array.splice(0,3,-1,-1);   //删除项1,2,3，改用-1,-1从删除的位置插入
alert(array);              //由于删除3项，插入为2项，数组长度减小。 -1,-1,4,5,6,7,8,9
```

### :closed_umbrella: 位置方法 ###

ECMAScript为数组实例添加了两个方法：IndexOf()和lastIndexOf()方法。这两个方法都接受两个参数，要查询的项（可选）和表示查找起点位置的索引。其中IndexOf()方法从数组的开头（位置0）开始向后查找，lastIndexOf（）方法则从数组的末尾开始向前查找。

这两个方法都返回要查询的项在数组中的位置，或者在没有找到的情况下返回-1.


```JavaScript
var array = [1,2,3,4,5,6,7,8,9];

var i = array.indexOf(3,5);   //查找3
alert(i);                     //3的下标为2，返回2

alert(array.lastIndexOf(6));  //查找6,下标为5，返回5
alert(array.indexOf(10));     //不存在，返回-1
```

### :closed_umbrella: 迭代方法 ###











